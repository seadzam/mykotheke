<?php
/* 
Template Name: Blog Template
*/

get_header(); 
?>

<section id="hero__page" class="section blog__hero">
    <div class="container">
        <div class="columns">
            <div class="column is-12">
                <div class="inner__wrap">
                    <svg width="67" height="67" viewBox="0 0 67 67" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="33.5" cy="33.5" r="33.5" fill="black"/>
                        <path d="M51.9097 26.1094C49.2222 18.8531 44.3847 13.7469 40.0847 13.7469C39.4128 13.7469 38.8753 13.8813 38.3378 14.0156C37.1284 14.4188 36.0534 15.3594 35.3816 16.5688C27.3191 25.7063 16.1659 29.8719 16.0316 29.8719C13.3441 30.8125 12.5378 35.1125 14.2847 39.8156C15.7628 43.8469 18.4503 46.4 20.8691 46.4C21.1378 46.4 21.5409 46.4 21.8097 46.2656C22.0784 46.1313 23.5566 45.8625 26.2441 45.4594L28.9316 51.1031C29.0659 51.3719 29.3347 51.6406 29.7378 51.775L34.0378 53.2531C34.1722 53.2531 34.3066 53.3875 34.4409 53.3875C34.7097 53.3875 34.9784 53.2531 35.2472 53.1188C35.6503 52.85 35.7847 52.3125 35.7847 51.9094L34.8441 44.25C38.2034 43.9813 41.9659 43.8469 45.7284 44.1156H45.9972C46.5347 44.25 47.0722 44.3844 47.6097 44.3844C48.2816 44.3844 48.8191 44.25 49.3566 44.1156C51.6409 43.3094 53.2534 40.7563 53.6566 37.1281C53.9253 33.9031 53.3878 29.8719 51.9097 26.1094ZM31.0816 49.3563L29.0659 44.9219L32.1566 44.5188L32.8284 49.8938L31.0816 49.3563ZM40.7566 36.4563C39.8159 34.9781 38.8753 33.2313 38.0691 31.0813C37.3972 29.0656 36.8597 27.1844 36.7253 25.3031C37.1284 25.3031 37.6659 25.7063 38.2034 26.1094C39.1441 27.05 40.0847 28.5281 40.6222 30.1406C41.6972 33.2313 41.4284 35.65 40.7566 36.4563ZM21.1378 43.7125C21.0034 43.7125 21.0034 43.7125 21.0034 43.7125C20.0628 43.9813 18.0472 42.2344 16.7034 38.875C15.4941 35.5156 16.0316 32.6938 16.8378 32.425C17.2409 32.2906 25.9753 29.0656 33.9034 21.8094C33.7691 24.9 34.3066 28.5281 35.5159 32.0219C36.9941 35.9188 39.0097 39.1438 41.2941 41.4281C30.8128 41.2938 21.5409 43.5781 21.1378 43.7125ZM50.8347 36.8594C50.5659 39.4125 49.6253 41.025 48.2816 41.5625C48.0128 41.6969 47.7441 41.6969 47.4753 41.6969C45.9972 41.6969 44.2503 40.6219 42.3691 38.4719C44.2503 36.8594 44.6534 33.2313 43.1753 29.2C42.3691 27.1844 41.2941 25.4375 40.0847 24.2281C39.0097 23.1531 37.8003 22.6156 36.5909 22.6156C36.5909 22.0781 36.5909 21.675 36.7253 21.2719C36.9941 18.7188 37.9347 17.1063 39.2784 16.5688C39.5472 16.4344 39.8159 16.4344 40.0847 16.4344C42.7722 16.4344 46.9378 20.4656 49.3566 27.05C50.7003 30.4094 51.2378 34.0375 50.8347 36.8594Z" fill="white"/>
                    </svg>
                    <div class="headline__wrap">
                        <h1 class="title">Blog</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="blog__page" class="section">
    <div class="container">
        <div class="columns">
            <div class="column is-4">
                <div class="sidebar__wrap">
                    <div class="sales__box">
                        <div class="inner__box">
                            <p class="content">Die Welt der Pilze wird neu entdeckt. Wir bemühen uns in diesem Blog Dich über die „aktuellen Pilz-Themen“ zu informieren.</p>
                        </div>
                    </div>
                    <div class="location__item is-hidden-touch">
                        <div class="location__content">
                            <h2 class="title">Besuche uns</h2>
                            <div class="group__items">
                                <a href="https://www.google.com/maps/place/MYKOTHEKE+-+VITALPILZ-PRODUKTE+BIO+%26+VEGAN/@48.2085838,16.3146036,17z/data=!3m1!4b1!4m5!3m4!1s0x476d05bae72b6d71:0x1f0b56a0a796d7f3!8m2!3d48.2085838!4d16.3167923" target="_blank" class="link__item">
                                    <svg width="54" height="54" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="27" cy="27" r="27" fill="black"/>
                                        <path d="M36 25C36 32 27 38 27 38C27 38 18 32 18 25C18 22.6131 18.9482 20.3239 20.636 18.636C22.3239 16.9482 24.6131 16 27 16C29.3869 16 31.6761 16.9482 33.364 18.636C35.0518 20.3239 36 22.6131 36 25Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M27 28C28.6569 28 30 26.6569 30 25C30 23.3431 28.6569 22 27 22C25.3431 22 24 23.3431 24 25C24 26.6569 25.3431 28 27 28Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <span>Possingergasse 59, 1160 Wien</span>
                                </a>
                                <a href="tel:+4319293003" class="link__item">
                                    <svg width="54" height="54" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="27" cy="27" r="27" fill="black"/>
                                        <path d="M36.8881 31.9201V34.9201C36.8892 35.1986 36.8322 35.4743 36.7206 35.7294C36.6091 35.9846 36.4454 36.2137 36.2402 36.402C36.035 36.5902 35.7927 36.7336 35.5289 36.8228C35.265 36.912 34.9855 36.9452 34.7081 36.9201C31.631 36.5857 28.6751 35.5342 26.0781 33.8501C23.6619 32.3148 21.6135 30.2663 20.0781 27.8501C18.3881 25.2413 17.3364 22.2711 17.0081 19.1801C16.9831 18.9036 17.016 18.6249 17.1046 18.3617C17.1932 18.0986 17.3357 17.8568 17.5229 17.6517C17.7101 17.4466 17.9379 17.2828 18.1919 17.1706C18.4459 17.0584 18.7205 17.0004 18.9981 17.0001H21.9981C22.4834 16.9953 22.9539 17.1672 23.3219 17.4836C23.6898 17.8001 23.9302 18.2395 23.9981 18.7201C24.1247 19.6802 24.3596 20.6228 24.6981 21.5301C24.8327 21.888 24.8618 22.277 24.782 22.651C24.7023 23.0249 24.517 23.3682 24.2481 23.6401L22.9781 24.9101C24.4017 27.4136 26.4746 29.4865 28.9781 30.9101L30.2481 29.6401C30.52 29.3712 30.8633 29.1859 31.2372 29.1062C31.6112 29.0264 32.0002 29.0556 32.3581 29.1901C33.2654 29.5286 34.2081 29.7635 35.1681 29.8901C35.6539 29.9586 36.0975 30.2033 36.4146 30.5776C36.7318 30.9519 36.9003 31.4297 36.8881 31.9201Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <span>+4319293003</span>
                                </a>
                                <a href="mailto:info@mykotheke.at" class="link__item">
                                    <svg width="54" height="54" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="27" cy="27" r="27" fill="black"/>
                                        <path d="M19 19H35C36.1 19 37 19.9 37 21V33C37 34.1 36.1 35 35 35H19C17.9 35 17 34.1 17 33V21C17 19.9 17.9 19 19 19Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M37 21L27 28L17 21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <span>info@mykotheke.at</span>
                                </a>
                            </div>
                            <a href="https://g.page/r/CfPXlqegVgsfEAE" target="_blank" class="btn__link">
                                <span>SIEHE WEGBESCHREIBUNG & ÖFFNUNGSZEITEN</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="column is-8">
                <div class="inner__wrap">
                    <div class="columns is-multiline">

                    <?php
                    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
                    $args = array(
                        'post_type' => 'post',
                        'posts_per_page' => 6,
                        'paged' => $paged,
                        'orderby' => 'meta_value',
                        'order' => 'DESC',
                        'meta_query' => array(
                            'relation' => 'OR',
                            array(
                                'key' => 'featured',
                                'compare' => 'NOT EXISTS',
                            ),
                            array(
                                'key' => 'featured',
                                'value' => '1',
                            )
                        )
                    );

                    $blog_query = new WP_Query($args);

                    if($blog_query->have_posts()) {
                        while($blog_query->have_posts()) : $blog_query->the_post(); ?>
                            
                        <div class="column is-12">
                            <div class="blog__post__box">
                                <?php if ( has_post_thumbnail() ) { ?>
                                    <figure class="image">
                                        <?php the_post_thumbnail('full'); ?>
                                    </figure>
                                <?php } ?>
                                <div class="content__elem">
                                    <div class="top__elem">
                                        <div class="date__elem">
                                            <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M14.6 2.7H2.7C1.76112 2.7 1 3.46111 1 4.4V16.3C1 17.2389 1.76112 18 2.7 18H14.6C15.5389 18 16.3 17.2389 16.3 16.3V4.4C16.3 3.46111 15.5389 2.7 14.6 2.7Z" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M12.0498 1V4.4" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M5.25 1V4.4" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M1 7.8H16.3" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            <span><?php echo get_the_date('d.m.Y.'); ?></span>
                                        </div>
                                        <h2 class="title"><?php echo get_the_title(); ?></h2>
                                    </div>
                                    <a href="<?php echo get_permalink(); ?>" class="more__btn"><span>MEHR</span></a>
                                </div>
                            </div>
                        </div>
                            
                        <?php endwhile; ?>

                            <div class="column is-12">
                                <div class="navigation pagination">
                                    <div class="nav-links">
                                        <?php 
                                            $total_pages = $blog_query->max_num_pages;

                                            if ($total_pages > 1){
                                        
                                                $current_page = max(1, get_query_var('paged'));
                                        
                                                echo paginate_links(array(
                                                    'base' => get_pagenum_link(1) . '%_%',
                                                    'format' => '/page/%#%',
                                                    'current' => $current_page,
                                                    'total' => $total_pages,
                                                    'prev_text' => __( '<svg width="6" height="11" viewBox="0 0 6 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 1L1 5.5L5 10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>', 'mykotheke' ),
                                                    'next_text' => __( '<svg width="6" height="11" viewBox="0 0 6 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 10L5 5.5L1 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>', 'mykotheke' ),
                                                ));
                                            }  
                                        ?>
                                    </div>
                                </div>
                            </div>

                        <?php wp_reset_postdata();  // Reset the query
                    } else {
                        echo '<p>No posts found.</p>';
                    }
                    ?>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<?php get_footer(); ?>
